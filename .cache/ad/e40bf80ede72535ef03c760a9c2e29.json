{"id":"SbO4","dependencies":[{"name":"/Users/kmadasu/kishore/trainings/javascript-gt/gautam/poseanimator/package.json","includedInParent":true,"mtime":1636789466000},{"name":"@tensorflow-models/posenet","loc":{"line":18,"column":32},"parent":"/Users/kmadasu/kishore/trainings/javascript-gt/gautam/poseanimator/camera.js","resolved":"/Users/kmadasu/kishore/trainings/javascript-gt/gautam/poseanimator/node_modules/@tensorflow-models/posenet/dist/posenet.esm.js"},{"name":"@tensorflow-models/facemesh","loc":{"line":19,"column":33},"parent":"/Users/kmadasu/kishore/trainings/javascript-gt/gautam/poseanimator/camera.js","resolved":"/Users/kmadasu/kishore/trainings/javascript-gt/gautam/poseanimator/node_modules/@tensorflow-models/facemesh/dist/facemesh.esm.js"},{"name":"@tensorflow/tfjs","loc":{"line":20,"column":20},"parent":"/Users/kmadasu/kishore/trainings/javascript-gt/gautam/poseanimator/camera.js","resolved":"/Users/kmadasu/kishore/trainings/javascript-gt/gautam/poseanimator/node_modules/@tensorflow/tfjs/dist/tf.esm.js"},{"name":"paper","loc":{"line":21,"column":23},"parent":"/Users/kmadasu/kishore/trainings/javascript-gt/gautam/poseanimator/camera.js","resolved":"/Users/kmadasu/kishore/trainings/javascript-gt/gautam/poseanimator/node_modules/paper/dist/paper-full.js"},{"name":"dat.gui","loc":{"line":22,"column":16},"parent":"/Users/kmadasu/kishore/trainings/javascript-gt/gautam/poseanimator/camera.js","resolved":"/Users/kmadasu/kishore/trainings/javascript-gt/gautam/poseanimator/node_modules/dat.gui/build/dat.gui.module.js"},{"name":"stats.js","loc":{"line":23,"column":18},"parent":"/Users/kmadasu/kishore/trainings/javascript-gt/gautam/poseanimator/camera.js","resolved":"/Users/kmadasu/kishore/trainings/javascript-gt/gautam/poseanimator/node_modules/stats.js/build/stats.min.js"},{"name":"babel-polyfill","loc":{"line":24,"column":7},"parent":"/Users/kmadasu/kishore/trainings/javascript-gt/gautam/poseanimator/camera.js","resolved":"/Users/kmadasu/kishore/trainings/javascript-gt/gautam/poseanimator/node_modules/babel-polyfill/lib/index.js"},{"name":"./utils/demoUtils","loc":{"line":26,"column":95},"parent":"/Users/kmadasu/kishore/trainings/javascript-gt/gautam/poseanimator/camera.js","resolved":"/Users/kmadasu/kishore/trainings/javascript-gt/gautam/poseanimator/utils/demoUtils.js"},{"name":"./utils/svgUtils","loc":{"line":27,"column":23},"parent":"/Users/kmadasu/kishore/trainings/javascript-gt/gautam/poseanimator/camera.js","resolved":"/Users/kmadasu/kishore/trainings/javascript-gt/gautam/poseanimator/utils/svgUtils.js"},{"name":"./illustrationGen/illustration","loc":{"line":28,"column":31},"parent":"/Users/kmadasu/kishore/trainings/javascript-gt/gautam/poseanimator/camera.js","resolved":"/Users/kmadasu/kishore/trainings/javascript-gt/gautam/poseanimator/illustrationGen/illustration.js"},{"name":"./illustrationGen/skeleton","loc":{"line":29,"column":43},"parent":"/Users/kmadasu/kishore/trainings/javascript-gt/gautam/poseanimator/camera.js","resolved":"/Users/kmadasu/kishore/trainings/javascript-gt/gautam/poseanimator/illustrationGen/skeleton.js"},{"name":"./utils/fileUtils","loc":{"line":30,"column":24},"parent":"/Users/kmadasu/kishore/trainings/javascript-gt/gautam/poseanimator/camera.js","resolved":"/Users/kmadasu/kishore/trainings/javascript-gt/gautam/poseanimator/utils/fileUtils.js"},{"name":"./resources/illustration/amoeba.svg","loc":{"line":33,"column":27},"parent":"/Users/kmadasu/kishore/trainings/javascript-gt/gautam/poseanimator/camera.js","resolved":"/Users/kmadasu/kishore/trainings/javascript-gt/gautam/poseanimator/resources/illustration/amoeba.svg"},{"name":"./resources/illustration/bird.svg","loc":{"line":34,"column":25},"parent":"/Users/kmadasu/kishore/trainings/javascript-gt/gautam/poseanimator/camera.js","resolved":"/Users/kmadasu/kishore/trainings/javascript-gt/gautam/poseanimator/resources/illustration/bird.svg"},{"name":"./resources/illustration/elephant.svg","loc":{"line":35,"column":29},"parent":"/Users/kmadasu/kishore/trainings/javascript-gt/gautam/poseanimator/camera.js","resolved":"/Users/kmadasu/kishore/trainings/javascript-gt/gautam/poseanimator/resources/illustration/elephant.svg"},{"name":"./resources/illustration/fish.svg","loc":{"line":36,"column":25},"parent":"/Users/kmadasu/kishore/trainings/javascript-gt/gautam/poseanimator/camera.js","resolved":"/Users/kmadasu/kishore/trainings/javascript-gt/gautam/poseanimator/resources/illustration/fish.svg"},{"name":"./resources/illustration/frog.svg","loc":{"line":37,"column":25},"parent":"/Users/kmadasu/kishore/trainings/javascript-gt/gautam/poseanimator/camera.js","resolved":"/Users/kmadasu/kishore/trainings/javascript-gt/gautam/poseanimator/resources/illustration/frog.svg"},{"name":"./resources/illustration/mushroom.svg","loc":{"line":38,"column":29},"parent":"/Users/kmadasu/kishore/trainings/javascript-gt/gautam/poseanimator/camera.js","resolved":"/Users/kmadasu/kishore/trainings/javascript-gt/gautam/poseanimator/resources/illustration/mushroom.svg"},{"name":"./resources/illustration/panther.svg","loc":{"line":39,"column":28},"parent":"/Users/kmadasu/kishore/trainings/javascript-gt/gautam/poseanimator/camera.js","resolved":"/Users/kmadasu/kishore/trainings/javascript-gt/gautam/poseanimator/resources/illustration/panther.svg"},{"name":"./resources/illustration/penguin.svg","loc":{"line":40,"column":28},"parent":"/Users/kmadasu/kishore/trainings/javascript-gt/gautam/poseanimator/camera.js","resolved":"/Users/kmadasu/kishore/trainings/javascript-gt/gautam/poseanimator/resources/illustration/penguin.svg"},{"name":"./resources/illustration/toad.svg","loc":{"line":41,"column":25},"parent":"/Users/kmadasu/kishore/trainings/javascript-gt/gautam/poseanimator/camera.js","resolved":"/Users/kmadasu/kishore/trainings/javascript-gt/gautam/poseanimator/resources/illustration/toad.svg"},{"name":"./resources/illustration/tree.svg","loc":{"line":42,"column":25},"parent":"/Users/kmadasu/kishore/trainings/javascript-gt/gautam/poseanimator/camera.js","resolved":"/Users/kmadasu/kishore/trainings/javascript-gt/gautam/poseanimator/resources/illustration/tree.svg"},{"name":"./resources/music/bird.mp3","loc":{"line":45,"column":27},"parent":"/Users/kmadasu/kishore/trainings/javascript-gt/gautam/poseanimator/camera.js","resolved":"/Users/kmadasu/kishore/trainings/javascript-gt/gautam/poseanimator/resources/music/bird.mp3"}],"generated":{"js":"\"use strict\";Object.defineProperty(exports,\"__esModule\",{value:!0}),exports.bindPage=ue;var e=D(require(\"@tensorflow-models/posenet\")),t=D(require(\"@tensorflow-models/facemesh\")),r=D(require(\"@tensorflow/tfjs\")),n=D(require(\"paper\")),a=k(require(\"dat.gui\")),o=k(require(\"stats.js\"));require(\"babel-polyfill\");var i,u=require(\"./utils/demoUtils\"),s=require(\"./utils/svgUtils\"),l=require(\"./illustrationGen/illustration\"),c=require(\"./illustrationGen/skeleton\"),d=require(\"./utils/fileUtils\"),f=D(require(\"./resources/illustration/amoeba.svg\")),p=D(require(\"./resources/illustration/bird.svg\")),g=D(require(\"./resources/illustration/elephant.svg\")),h=D(require(\"./resources/illustration/fish.svg\")),v=D(require(\"./resources/illustration/frog.svg\")),m=D(require(\"./resources/illustration/mushroom.svg\")),w=D(require(\"./resources/illustration/panther.svg\")),b=D(require(\"./resources/illustration/penguin.svg\")),y=D(require(\"./resources/illustration/toad.svg\")),x=D(require(\"./resources/illustration/tree.svg\")),q=D(require(\"./resources/music/bird.mp3\"));function k(e){return e&&e.__esModule?e:{default:e}}function M(){if(\"function\"!=typeof WeakMap)return null;var e=new WeakMap;return M=function(){return e},e}function D(e){if(e&&e.__esModule)return e;if(null===e||\"object\"!=typeof e&&\"function\"!=typeof e)return{default:e};var t=M();if(t&&t.has(e))return t.get(e);var r={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var o=n?Object.getOwnPropertyDescriptor(e,a):null;o&&(o.get||o.set)?Object.defineProperty(r,a,o):r[a]=e[a]}return r.default=e,t&&t.set(e,r),r}function P(e,t,r,n,a,o,i){try{var u=e[o](i),s=u.value}catch(l){return void r(l)}u.done?t(s):Promise.resolve(s).then(n,a)}function S(e){return function(){var t=this,r=arguments;return new Promise(function(n,a){var o=e.apply(t,r);function i(e){P(o,n,a,i,u,\"next\",e)}function u(e){P(o,n,a,i,u,\"throw\",e)}i(void 0)})}}var j,I,O,U=300,R=300,G=null,E=null,F=800,B=800,L=.15,T=.1,V=30,_=!1,C=new o.default,A={amoeba:f.default,bird:p.default,elephant:g.default,fish:h.default,frog:v.default,mushroom:m.default,panther:w.default,penguin:b.default,toad:y.default,tree:x.default},H=[],N=new Audio(q);function W(e,t){return e=Math.ceil(e),t=Math.floor(t),Math.floor(Math.random()*(t-e+1))+e}function z(){N.play()}function K(){return J.apply(this,arguments)}function J(){return(J=S(regeneratorRuntime.mark(function e(){var t,r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(navigator.mediaDevices&&navigator.mediaDevices.getUserMedia){e.next=2;break}throw new Error(\"Browser API navigator.mediaDevices.getUserMedia not available\");case 2:return(t=document.getElementById(\"video\")).width=U,t.height=R,e.next=7,navigator.mediaDevices.getUserMedia({audio:!1,video:{facingMode:\"user\",width:U,height:R}});case 7:return r=e.sent,t.srcObject=r,e.abrupt(\"return\",new Promise(function(e){t.onloadedmetadata=function(){e(t)}}));case 10:case\"end\":return e.stop()}},e)}))).apply(this,arguments)}function Q(){return X.apply(this,arguments)}function X(){return(X=S(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,K();case 2:return(t=e.sent).play(),e.abrupt(\"return\",t);case 5:case\"end\":return e.stop()}},e)}))).apply(this,arguments)}var Y=\"MobileNetV1\",Z=2,$=1,ee=16,te=200,re={avatarSVG:Object.keys(A)[0],debug:{showDetectionDebug:!0,showIllustrationDebug:!1}};function ne(e){e.length>0&&(re.camera=e[0].deviceId);var t=new a.default.GUI({width:300}),r=t.addFolder(\"Image\");t.add(re,\"avatarSVG\",Object.keys(A)).onChange(function(){return le(A[re.avatarSVG])}),r.open();var n=t.addFolder(\"Debug control\");n.add(re.debug,\"showDetectionDebug\"),n.add(re.debug,\"showIllustrationDebug\"),n.open()}function ae(){C.showPanel(0),document.getElementById(\"main\").appendChild(C.dom)}function oe(e){var t=document.getElementById(\"output\"),n=document.getElementById(\"keypoints\"),a=t.getContext(\"2d\"),o=n.getContext(\"2d\");function i(){return s.apply(this,arguments)}function s(){return(s=S(regeneratorRuntime.mark(function n(){var s,l,d,f;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return C.begin(),s=[],a.clearRect(0,0,U,R),a.save(),a.scale(-1,1),a.translate(-U,0),a.drawImage(e,0,0,U,R),a.restore(),l=r.browser.fromPixels(t),n.next=11,I.estimateFaces(l,!1,!1);case 11:return G=n.sent,n.next=14,O.estimatePoses(e,{flipHorizontal:!0,decodingMethod:\"multi-person\",maxDetections:1,scoreThreshold:T,nmsRadius:V});case 14:d=n.sent,s=s.concat(d),l.dispose(),o.clearRect(0,0,U,R),re.debug.showDetectionDebug&&(s.forEach(function(e){var t=e.score,r=e.keypoints;t>=L&&((0,u.drawKeypoints)(r,T,o),(0,u.drawSkeleton)(r,T,o))}),G.forEach(function(e){Object.values(c.facePartName2Index).forEach(function(t){var r=e.scaledMesh[t];(0,u.drawPoint)(o,r[1],r[0],2,\"red\")})})),j.project.clear(),s.length>=1&&E&&(c.Skeleton.flipPose(s[0]),G&&G.length>0?(f=c.Skeleton.toFaceFrame(G[0]),E.updateSkeleton(s[0],f)):E.updateSkeleton(s[0],null),E.draw(j,U,R),re.debug.showIllustrationDebug&&E.debugDraw(j)),j.project.activeLayer.scale(F/U,B/R,new j.Point(0,0)),C.end(),requestAnimationFrame(i);case 24:case\"end\":return n.stop()}},n)}))).apply(this,arguments)}t.width=U,t.height=R,n.width=U,n.height=R,i()}function ie(){(_=(0,u.isMobile)())&&(F=Math.min(window.innerWidth,window.innerHeight),B=F,U*=.7,R*=.7),j=n.default;var e=document.querySelector(\".illustration-canvas\");e.width=F,e.height=B,j.setup(e)}function ue(){return se.apply(this,arguments)}function se(){return(se=S(regeneratorRuntime.mark(function r(){var n,a;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return ie(),(0,u.toggleLoadingUI)(!0),(0,u.setStatusText)(\"Loading PoseNet model...\"),r.next=5,e.load({architecture:Y,outputStride:ee,inputResolution:te,multiplier:$,quantBytes:Z});case 5:return O=r.sent,(0,u.setStatusText)(\"Loading FaceMesh model...\"),r.next=9,t.load();case 9:return I=r.sent,(0,u.setStatusText)(\"Loading Avatar file...\"),new Date,r.next=14,le(Object.values(A)[0]);case 14:return(0,u.setStatusText)(\"Setting up camera...\"),r.prev=15,r.next=18,Q();case 18:i=r.sent,r.next=27;break;case 21:throw r.prev=21,r.t0=r.catch(15),(n=document.getElementById(\"info\")).textContent=\"this device type is not supported yet, or this browser does not support video capture: \"+r.t0.toString(),n.style.display=\"block\",r.t0;case 27:a=W(0,Object.values(A).length),console.log(a),le(Object.values(A)[a]),console.log(\"gautam Testing\",A),(0,u.toggleLoadingUI)(!1),oe(i,O);case 33:case\"end\":return r.stop()}},r,null,[[15,21]])}))).apply(this,arguments)}function le(e){return ce.apply(this,arguments)}function ce(){return(ce=S(regeneratorRuntime.mark(function e(t){var r,n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(t),e.next=3,s.SVGUtils.importSVG(t);case 3:r=e.sent,n=new c.Skeleton(r),(E=new l.PoseIllustration(j)).bindSkeleton(n,r);case 7:case\"end\":return e.stop()}},e)}))).apply(this,arguments)}navigator.getUserMedia=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia,d.FileUtils.setDragDropHandler(function(e){le(e)}),ue();"},"sourceMaps":null,"error":null,"hash":"dae429275397539cbf7109cd76cacf87","cacheData":{"env":{}}}